# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –ø–æ–¥–ø–∏—Å–∫–∏. –¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ (RUB_PRICE_1_MONTH) —É–º–Ω–æ–∂–µ–Ω–Ω–∞—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

## –ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env

```env
# Device Limit Configuration
# –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ RemnaWave panel –∫–∞–∫ HWID_FALLBACK_DEVICE_LIMIT
DEVICE_LIMIT_1=1
DEVICE_LIMIT_2=2
DEVICE_LIMIT_3=3
DEVICE_LIMIT_4=4
DEVICE_LIMIT_5=5
DEVICE_LIMIT_6=6
DEVICE_LIMIT_CUSTOM=10
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `device_limit` –≤ —Ç–∞–±–ª–∏—Ü—ã:
- `payments` - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –∑–∞–ø–∏—Å–∏ –æ –ø–ª–∞—Ç–µ–∂–µ
- `subscriptions` - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –ø–æ–¥–ø–∏—Å–∫–µ

### –ú–∏–≥—Ä–∞—Ü–∏—è

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-–º–∏–≥—Ä–∞—Ü–∏—é:

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ device_limit –≤ —Ç–∞–±–ª–∏—Ü—É payments
ALTER TABLE payments ADD COLUMN device_limit INTEGER DEFAULT 1;

-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ device_limit –≤ —Ç–∞–±–ª–∏—Ü—É subscriptions  
ALTER TABLE subscriptions ADD COLUMN device_limit INTEGER DEFAULT 1;
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (1-6 –∏–ª–∏ —Å–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
2. **–†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã**: –¶–µ–Ω–∞ = –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
3. **–í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞**: –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏ —Å —É–∂–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π
4. **–ü–µ—Ä–µ–¥–∞—á–∞ –≤ –ø–∞–Ω–µ–ª—å**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ RemnaWave panel –∫–∞–∫ `hwidFallbackDeviceLimit`

## –ù–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### –†—É—Å—Å–∫–∏–π (ru.json)
```json
{
  "select_device_limit": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:",
  "device_limit_button": "{devices} —É—Å—Ç—Ä–æ–π—Å—Ç–≤",
  "device_limit_custom_button": "–°–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ",
  "enter_custom_device_limit": "–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–æ—Ç 1 –¥–æ 50):",
  "invalid_device_limit": "–ù–µ–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 50."
}
```

### –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (en.json)
```json
{
  "select_device_limit": "Select number of devices:",
  "device_limit_button": "{devices} devices",
  "device_limit_custom_button": "Custom amount",
  "enter_custom_device_limit": "Enter number of devices (1-50):",
  "invalid_device_limit": "Invalid number of devices. Enter a number from 1 to 50."
}
```

## –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –¥–µ—Ç–∞–ª—è—Ö –ø–æ–¥–ø–∏—Å–∫–∏

–í –¥–µ—Ç–∞–ª—è—Ö –ø–æ–¥–ø–∏—Å–∫–∏ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:

```
üîê –ú–æ—è –ø–æ–¥–ø–∏—Å–∫–∞:

–°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–Ω–∞
–ê–∫—Ç–∏–≤–Ω–∞ –¥–æ: 2024-12-31 (–æ—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π: 30)

–¢—Ä–∞—Ñ–∏–∫: 2.50 GB –∏–∑ 10.00 GB
–£—Å—Ç—Ä–æ–π—Å—Ç–≤: 3

–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
<code>https://your-config-link.com</code>
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `config/settings.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ device_limit
- `db/models.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è device_limit
- `bot/keyboards/inline/user_keyboards.py` - –Ω–æ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `bot/handlers/user/subscription.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–∫—É–ø–∫–∏
- `bot/services/subscription_service.py` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ device_limit
- `bot/services/stars_service.py` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ device_limit
- `bot/services/crypto_pay_service.py` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ device_limit
- `bot/services/tribute_service.py` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ device_limit
- `locales/ru.json` –∏ `locales/en.json` - –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### –ù–æ–≤—ã–µ callback_data —Ñ–æ—Ä–º–∞—Ç—ã:
- `device_limit:1` - –≤—ã–±–æ—Ä 1 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `device_limit:custom` - –≤—ã–±–æ—Ä —Å–≤–æ–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- `subscribe_period:3:2` - –≤—ã–±–æ—Ä 3 –º–µ—Å—è—Ü–µ–≤ –¥–ª—è 2 —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `pay_yk:3:598:2` - –æ–ø–ª–∞—Ç–∞ 3 –º–µ—Å—è—Ü–µ–≤ –¥–ª—è 2 —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (—Ü–µ–Ω–∞ 598 —Ä—É–±)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–Ω

–¶–µ–Ω—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ .env —Ñ–∞–π–ª–µ –∫–∞–∫ –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –∑–∞ 1 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:

```env
RUB_PRICE_1_MONTH=299    # 299 —Ä—É–± –∑–∞ 1 –º–µ—Å—è—Ü –¥–ª—è 1 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
RUB_PRICE_3_MONTHS=799   # 799 —Ä—É–± –∑–∞ 3 –º–µ—Å—è—Ü–∞ –¥–ª—è 1 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ 3 —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ü–µ–Ω–∞ –±—É–¥–µ—Ç:
- 1 –º–µ—Å—è—Ü: 299 √ó 3 = 897 —Ä—É–±
- 3 –º–µ—Å—è—Ü–∞: 799 √ó 3 = 2397 —Ä—É–±
